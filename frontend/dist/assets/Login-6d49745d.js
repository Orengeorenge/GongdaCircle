import{u as x,r as f,a as y,b as l,o as L,c as U,d as n,e as s,w as r,f as p,E as _}from"./index-e807a5c3.js";import{a as I}from"./auth-141c36a1.js";import{_ as R,s as h,a as z}from"./_plugin-vue_export-helper-608cf584.js";const A={class:"auth-container"},B={class:"auth-card"},C={class:"auth-links"},E={__name:"Login",setup(F){const g=x(),i=f(!1),m=f(),a=y({username:"",password:"",remember:!1}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d@$!%*?&]{8,20}$/,message:"密码必须包含大小写字母和数字，长度8-20位",trigger:"blur"}]},w=async()=>{m.value&&await m.value.validate(async c=>{var e,u;if(c){i.value=!0;try{const o=await I.login({username:a.username,password:a.password});if(o.data.code===200){const t=o.data.data;h(t.token),z(t.userInfo),_.success("登录成功"),g.push("/home")}else _.error(o.data.message||"登录失败")}catch(o){console.error("登录错误:",o);const t=((u=(e=o.response)==null?void 0:e.data)==null?void 0:u.message)||"登录失败，请检查网络连接";_.error(t)}finally{i.value=!1}}})};return(c,e)=>{const u=l("el-input"),o=l("el-form-item"),t=l("el-checkbox"),b=l("el-button"),k=l("el-form"),V=l("router-link");return L(),U("div",A,[n("div",B,[e[7]||(e[7]=n("div",{class:"logo-section"},[n("h1",{class:"logo"},"工大人社交圈"),n("p",{class:"subtitle"},"连接每一位工大人")],-1)),s(k,{ref_key:"loginFormRef",ref:m,model:a,rules:v,class:"login-form",size:"large"},{default:r(()=>[s(o,{prop:"username"},{default:r(()=>[s(u,{modelValue:a.username,"onUpdate:modelValue":e[0]||(e[0]=d=>a.username=d),placeholder:"请输入用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(o,{prop:"password"},{default:r(()=>[s(u,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=d=>a.password=d),type:"password",placeholder:"请输入密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(o,null,{default:r(()=>[s(t,{modelValue:a.remember,"onUpdate:modelValue":e[2]||(e[2]=d=>a.remember=d)},{default:r(()=>e[3]||(e[3]=[p(" 记住我 ")])),_:1,__:[3]},8,["modelValue"])]),_:1}),s(o,null,{default:r(()=>[s(b,{type:"primary",class:"login-btn",loading:i.value,onClick:w},{default:r(()=>e[4]||(e[4]=[p(" 登录 ")])),_:1,__:[4]},8,["loading"])]),_:1})]),_:1},8,["model"]),n("div",C,[e[6]||(e[6]=n("span",null,"还没有账号？",-1)),s(V,{to:"/register",class:"link"},{default:r(()=>e[5]||(e[5]=[p("立即注册")])),_:1,__:[5]})])])])}}},T=R(E,[["__scopeId","data-v-53a60455"]]);export{T as default};
