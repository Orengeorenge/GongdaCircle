# 帖子发布功能测试指南

## 🎯 测试目标

验证前端发布页面与后端发布接口的集成是否正常工作。

## 📋 测试前准备

### 1. 环境要求
- 后端服务运行在 `http://localhost:8080`
- 前端服务运行在 `http://localhost:3000`
- 数据库中有可用的测试用户账号

### 2. 启动服务
```bash
# 启动后端服务（在项目根目录）
mvn spring-boot:run

# 启动前端服务（在frontend目录）
cd frontend
npm run dev
```

## 🧪 测试步骤

### 步骤1: 用户登录
1. 访问 http://localhost:3000/login
2. 输入有效的用户名和密码（如：test/123456）
3. 点击"登录"按钮
4. **期望结果**: 登录成功，跳转到首页，localStorage中存储token

### 步骤2: 访问发布页面
1. 在首页点击"发布"按钮或直接访问 http://localhost:3000/publish
2. **期望结果**: 成功加载发布页面，显示表单界面

### 步骤3: 测试表单验证
1. 不填写任何内容，直接点击"发布动态"
2. **期望结果**: 显示"请输入内容"错误提示

### 步骤4: 测试基础发布功能
1. 填写以下内容：
   - **标题**: `测试帖子标题`
   - **内容**: `这是一个测试帖子的内容，用于验证发布功能是否正常工作。`
   - **标签**: 点击"学习心得"添加标签
2. 点击"发布动态"按钮
3. **期望结果**: 
   - 按钮显示loading状态
   - 收到"发布成功"提示
   - 跳转回首页

### 步骤5: 测试自定义标签
1. 回到发布页面
2. 填写内容，点击"+ 添加话题"
3. 输入自定义标签如"前端开发"
4. 按Enter键确认
5. 点击发布
6. **期望结果**: 成功发布带自定义标签的帖子

### 步骤6: 测试多标签发布
1. 填写内容
2. 添加多个标签：`工大校园`, `技术交流`, `Vue3`
3. 点击发布
4. **期望结果**: 成功发布多标签帖子

### 步骤7: 测试长内容发布
1. 填写较长的内容（500-1000字）
2. 点击发布
3. **期望结果**: 成功发布长内容帖子

## 🔍 测试检查点

### 前端检查
- [ ] 表单验证是否正常工作
- [ ] 标签添加/删除功能是否正常
- [ ] 发布按钮loading状态是否显示
- [ ] 成功/错误消息是否正确显示
- [ ] 页面跳转是否正常

### 网络请求检查
打开浏览器开发者工具 -> Network标签页：
- [ ] 请求URL: `http://localhost:8080/api/post/publish`
- [ ] 请求方法: `POST`
- [ ] 请求头包含: `Authorization: Bearer [token]`
- [ ] 请求体格式正确：
  ```json
  {
    "title": "测试标题",
    "content": "测试内容",
    "tags": "标签1,标签2",
    "type": 1,
    "location": "工业大学"
  }
  ```

### 后端检查
- [ ] 后端接收到正确的请求参数
- [ ] 返回正确的响应格式
- [ ] 数据库中新增帖子记录

## 📊 测试数据示例

### 测试用例1: 基础文字帖子
```json
{
  "title": "工大生活分享",
  "content": "今天在图书馆学习了一天，收获很多！",
  "tags": "校园生活,学习心得",
  "type": 1,
  "location": "工业大学图书馆"
}
```

### 测试用例2: 长标题长内容
```json
{
  "title": "关于大学生如何提高学习效率和时间管理能力的深度思考与实践经验分享",
  "content": "经过三年的大学学习生活，我总结了一些关于提高学习效率的方法...[500字内容]",
  "tags": "学习方法,时间管理,经验分享",
  "type": 1
}
```

### 测试用例3: 仅内容无标题
```json
{
  "title": "",
  "content": "分享一个好用的学习工具，推荐给大家！",
  "tags": "工具推荐",
  "type": 1
}
```

## ✅ 测试通过标准

- 所有基础功能测试用例通过
- 网络请求格式正确
- 错误处理机制正常
- 用户体验流畅
- 无控制台错误

## 🐛 常见问题排查

### 问题1: 登录后访问发布页面显示401错误
**原因**: Token未正确传递或已过期
**解决**: 
1. 检查localStorage中是否有token
2. 检查请求头是否包含Authorization字段
3. 重新登录获取新token

### 问题2: 发布时显示网络错误
**原因**: 后端服务未启动或端口不匹配
**解决**:
1. 确认后端服务在8080端口运行
2. 检查Vite代理配置是否正确

### 问题3: 发布成功但未跳转
**原因**: 路由跳转代码问题
**解决**: 检查router.push('/home')是否正确执行

### 问题4: 标签显示格式不正确
**原因**: 后端接收的tags参数格式问题
**解决**: 确认多个标签用逗号分隔传递

---

**测试版本**: v1.0.0  
**最后更新**: 2024年1月 